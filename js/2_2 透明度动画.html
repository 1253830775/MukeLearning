<!DOCTYPE html>
<html lang="en">
<head>
	<meta charset="UTF-8">
	<title>透明度动画</title>
	<style>
		#box{
			width: 300px;
			height: 200px;
			background-color: black;
			opacity: 0.4;
		}
	</style>
</head>
<body>
	<div id="box"></div>
	<script>
		var box = document.getElementById('box');
		var timer = null;
		var opca = 0.4;
		window.onload=function() {
			box.onmouseover = function(){
				fn(0.8);
			}
			box.onmouseout = function(){
				fn(0.4);
			}
		}
		function fn(target){
			var speed = 0;
			clearInterval(timer);
			if (target>box.style.opacity) {speed=0.1;}
			else if (target<box.style.opacity) {speed=-0.1;}
			timer = setInterval(function(){
				
				if (box.style.opacity==target) {clearInterval(timer);}
				else{
					opca+=speed;
				    box.style.opacity=opca;}},1)									
		}
	</script>
</body>
</html>